# Default values for rucio.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

## replicaCount gives the number of server pods to run
replicaCount: 1 
## authReplicaCount gives the number of authentication server pods to run
authReplicaCount: 1

serviceAccountName: useroot

experiment: icarus

image:
  repository: bjwhitefnal/fnal-rucio-server
  tag: latest
  pullPolicy: Always

route:
  app: rucio-server
  host: www.icarus-rucio.fnal.gov
  serviceName: rucio-server

authRoute:
  app: rucio-server-auth
  host: www.auth-icarus-rucio.fnal.gov
  serviceName: rucio-server-auth

service:
  type: ClusterIP
  port: 8080
  targetPort: 80
  externalIP: < INSERT INSTANCE EXTERNAL IP HERE>

authService:
  type: ClusterIP
  port: 8081
  targetPort: 443
  externalIP: < INSERT INSTANCE EXTERNAL IP HERE>
  tls: 
    enabled: true

strategy:
  type: RollingUpdate
  rollingUpdate:
    maxSurge: 1
    maxUnavailable: 1

minReadySeconds: 5

httpd_config:
  mpm_mode: "prefork"
  start_servers: "1"
  min_spare_servers: "1"
  max_spare_servers: "1"
  server_limit: "1"
  max_clients: "10"
  max_requests_per_child: "200"


## values used to configure apache
httpd_config:
  use_ca_path: "1"
  # mpm_mode: "worker"
  # start_servers: "1"
  # min_spare_threads: "1"
  # max_spare_threads: "20"
  # threads_per_child: "5"
  # max_clients: "20"
  # max_requests_per_child: "8192"

monitor:
  carbon_server: "lsdataitb.fnal.gov"
  carbon_port: 8225
  user_scope: "rucio.icarus_okd_dev"

logging:
    log_level: 0

## values used to configure Rucio
config:

resources: {}
  # limits:
  #  cpu: 100m
  #  memory: 128Mi
  # requests:
  #  cpu: 100m
  #  memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}

